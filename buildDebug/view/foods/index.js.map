{"version":3,"sources":["../../../src/view/foods/index.js"],"names":["require","name","data","typeIndex","listType","showBox","computed","methods","getData","$axios","method","url","timeout","headers","then","status","result","setRoomInfo","seller","typeChange","listTypeChange","index","deepCopy","p","c","i","constructor","Array","add","item","newOne","util","Object","index1","index2","console","info","buyNumber","orders","list","push","number","remove","length","splice","show","mounted","watch","components","RoomInfo","GoodsList","MenuList"],"mappings":"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","file":"index.js","sourcesContent":["require(\"babel-register\");\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport RoomInfo from './components/roomInfo/index.vue'\r\nimport MenuList from './components/menu/index.vue'\r\nimport GoodsList from './components/goodslist/index.vue'\r\nimport BScroll from 'better-scroll' \r\nimport qs from 'qs'\r\nexport default {\r\n  name: 'demotwo',\r\n  data () {\r\n    return {\r\n      data:{},\r\n      typeIndex:0,\r\n      listType:0,\r\n      showBox:false,//显示遮罩\r\n    }\r\n  },\r\n  computed: {\r\n      ...mapGetters([\r\n        'nameGetter',\r\n        'ctxGetter',\r\n        'orders',\r\n      ])\r\n  },\r\n  methods:{\r\n    ...mapActions([\r\n        'setName',\r\n        'setCtx',\r\n        'setRoomInfo',//\r\n        'setOrders',\r\n    ]),\r\n    getData(){\r\n      this.$axios({\r\n        method: 'get', // 请求协议\r\n        url: '../../static/data.json', // 请求的地址\r\n        // data: qs.stringify(data), // post 请求的数据\r\n        timeout: 30000, // 超时时间, 单位毫秒\r\n        headers: {\r\n          'X-Requested-With': 'XMLHttpRequest'\r\n        }\r\n      }).then(result=>{\r\n        const status = 200\r\n        if(result.status==status){\r\n          this.data=result.data\r\n          this.setRoomInfo(this.data.seller)\r\n        }\r\n        \r\n      })\r\n    },\r\n    typeChange(typeIndex){\r\n      this.typeIndex=typeIndex\r\n    },\r\n    listTypeChange(index){\r\n      this.listType=index\r\n    },\r\n    //深度拷贝\r\n    deepCopy(p, c) {\r\n　　　　var c = c || {};\r\n　　　　for (var i in p) {\r\n　　　　　　if (typeof p[i] === 'object') {\r\n　　　　　　　　c[i] = (p[i].constructor === Array) ? [] : {};\r\n　　　　　　　　this.deepCopy(p[i], c[i]);\r\n　　　　　　} else {\r\n　　　　　　　　　c[i] = p[i];\r\n　　　　　　}\r\n　　　　}\r\n　　　　return c;\r\n　　},\r\n    //添加物品到购物车\r\n    add(item){\r\n      let newOne = this.util.deepCopy(item.data,new Object())\r\n      newOne['index1'] = item.index1\r\n      newOne['index2'] = item.index2\r\n      console.info(newOne)\r\n      //let orders = this.orders\r\n      if(newOne.buyNumber==1) {\r\n        this.orders.list.push(newOne)\r\n      } else {\r\n        for( let i in this.orders.list) {\r\n          if(this.orders.list[i].name == newOne.name) {\r\n            this.orders.list[i].buyNumber += 1;\r\n          }\r\n        }\r\n      }\r\n      this.orders.number +=1 \r\n      //this.setOrders(orders)\r\n    },\r\n    //移除购物车物品\r\n    remove(item){\r\n      let newOne = this.util.deepCopy(item.data,new Object())\r\n      newOne['index1'] = item.index1\r\n      newOne['index2'] = item.index2\r\n        for(let i=0 ;i<this.orders.list.length;i++){\r\n          if(newOne.name == this.orders.list[i].name){\r\n            if(this.orders.list[i].buyNumber==1) {\r\n              this.orders.list.splice(i,1);\r\n                \r\n            } else {\r\n              this.orders.list[i].buyNumber +=-1\r\n            }\r\n            break;\r\n          }\r\n        }\r\n        this.orders.number +=-1;\r\n      //this.setOrders(orders)\r\n    },\r\n    show(item){\r\n      this.showBox = item\r\n    }\r\n  },\r\n  mounted(){\r\n    this.getData()\r\n  },\r\n  watch:{\r\n  },\r\n  components:{\r\n    RoomInfo,\r\n    GoodsList,\r\n    MenuList,\r\n  }\r\n}"]}