{"version":3,"sources":["../../../../../src/view/foods/components/detail/index.js"],"names":["name","data","datas","index","showIndex","allNum","goodNum","badNum","detailScroll","computed","methods","initScroll","self","setTimeout","$refs","scrollDetail","refresh","showAssess","created","$route","params","ratings","length","forEach","item","type","rateType","watch"],"mappings":"sLAAA;AACA,6C;AACA,wB;AACe;AACbA,QAAM,YADO;AAEbC,MAFa,kBAEL;AACN,WAAO;AACLC,aAAM,EADD;AAELC,aAAM,CAFD;AAGLC,iBAAU,CAHL;AAILC,cAAO,CAJF;AAKLC,eAAQ,CALH;AAMLC,cAAO,CANF;AAOLC,oBAAa,IAPR,EAAP;;AASD,GAZY;AAabC;AACO,wBAAW;AACZ,cADY;AAEZ,aAFY,CAAX,CADP,CAba;;;AAmBbC;AACK,wBAAW;AACV,WADU;AAEV,UAFU,CAED;AAFC,GAAX,CADL;AAKEC,cALF,wBAKc;AACV,UAAIC,OAAO,IAAX;AACA,UAAG,KAAKJ,YAAL,IAAoB,IAAvB,EAA4B;AAC1BK,mBAAW,YAAU;AACnBD,eAAKJ,YAAL,GAAoB,2BAAYI,KAAKE,KAAL,CAAWC,YAAvB,EAAqC,EAArC,CAApB;;;AAGA,SAJF,EAII,GAJJ;AAKA;AACA;;AAEA;AACA;AACD,OAXD,MAWO;AACL,aAAKP,YAAL,CAAkBQ,OAAlB;AACD;AACF,KArBH;AAsBEC,cAtBF,sBAsBad,KAtBb,EAsBmB;AACf,WAAKC,SAAL,GAAiBD,KAAjB;AACD,KAxBH,GAnBa;;AA6Cbe,SA7Ca,qBA6CJ;AACP,SAAKhB,KAAL,GAAa,KAAKiB,MAAL,CAAYC,MAAZ,CAAmBnB,IAAhC;AACA,SAAKI,MAAL,GAAc,KAAKH,KAAL,CAAWmB,OAAX,CAAmBC,MAAjC;AACA,QAAIV,OAAO,IAAX;AACA,SAAKV,KAAL,CAAWmB,OAAX,CAAmBE,OAAnB,CAA2B,UAASC,IAAT,EAAc;AACrC,UAAIC,OAAOD,KAAKE,QAAhB;AACA,UAAGD,QAAQ,CAAX,EAAa;AACXb,aAAKN,OAAL,IAAe,CAAf;AACD,OAFD,MAEM,IAAGmB,QAAQ,CAAX,EAAc;AAClBb,aAAKL,MAAL,IAAc,CAAd;AACD;;AAEJ,KARD;AASA,SAAKI,UAAL;AACD,GA3DY;AA4DbgB,SAAM;AACJ;AACA;AACA;AACA;AACA;AACA;AANI,GA5DO,E","file":"index.js","sourcesContent":["import { mapGetters, mapActions } from 'vuex'\r\nimport Bscroll from 'better-scroll' \r\nimport qs from 'qs'\r\nexport default {\r\n  name: 'foodDetail',\r\n  data () {\r\n    return {\r\n      datas:{},\r\n      index:0,\r\n      showIndex:1,\r\n      allNum:0,\r\n      goodNum:0,\r\n      badNum:0,\r\n      detailScroll:null,\r\n    }\r\n  },\r\n  computed: {\r\n      ...mapGetters([\r\n        'nameGetter',\r\n        'ctxGetter'\r\n      ])\r\n  },\r\n  methods:{\r\n    ...mapActions([\r\n        'setName',\r\n        'setCtx' //\r\n    ]),\r\n    initScroll(){\r\n      var self = this\r\n      if(this.detailScroll ==null){ \r\n        setTimeout(function(){\r\n          self.detailScroll = new Bscroll(self.$refs.scrollDetail, {\r\n            \r\n          })\r\n         }, 100)\r\n        // this.$nextTick(() => { \r\n        //   self.detailScroll = new Bscroll(self.$refs.scrollDetail, {\r\n            \r\n        //   })\r\n        // })\r\n      } else {\r\n        this.detailScroll.refresh()\r\n      }\r\n    },\r\n    showAssess(index){\r\n      this.showIndex = index\r\n    }\r\n  },\r\n  created(){\r\n    this.datas = this.$route.params.data\r\n    this.allNum = this.datas.ratings.length\r\n    let self = this\r\n    this.datas.ratings.forEach(function(item){\r\n        let type = item.rateType\r\n        if(type == 0){\r\n          self.goodNum +=1\r\n        }else if(type == 1) {\r\n          self.badNum +=1\r\n        }\r\n        \r\n    })\r\n    this.initScroll()\r\n  },\r\n  watch:{\r\n    // datas(datas){\r\n    //   this.datas = datas\r\n    //   if(datas!={}){\r\n    //     this.initScroll()\r\n    //   }\r\n    // },\r\n  },\r\n}"]}